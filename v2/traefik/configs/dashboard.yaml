tls:
  stores:
    default:
      certFile: /etc/traefik/certificate.crt
      keyFile: /run/secrets/secret.key
  options:
    default:
      minVersion: VersionTLS12

http:
  routers:
    api:
      entryPoints:
        - admin
      rule: PathPrefix(`/api`) || PathPrefix(`/dashboard`)
      service: api@internal
      middlewares:
        - auth

  middlewares:
    # Define the middleware so we'll have it available
    hsts:
      headers:
        forceSTSHeader: true
        stsSeconds: 315360000
        stsPreload: false
    auth:
      basicAuth:
        users:
          - "admin:$2y$05$MT/GydBXaaMXZAKeEuQGveRxw2Hvvrr4AwWe6lqm3juD7DEX6vWXS"
